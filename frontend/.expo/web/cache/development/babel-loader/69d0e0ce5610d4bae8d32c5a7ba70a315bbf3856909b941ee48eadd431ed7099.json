{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport QRCode from 'react-native-qrcode-svg';\nimport { saveTicketOffline } from \"../utils/storage\";\nimport { scheduleWakeUpAlert } from \"../utils/notifications\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function TicketScreen(_ref) {\n  var route = _ref.route;\n  var _ref2 = route.params || {},\n    bus = _ref2.bus;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    ticket = _useState2[0],\n    setTicket = _useState2[1];\n  useEffect(function () {\n    var newTicket = {\n      ticket_id: \"HRB-\" + Date.now(),\n      bus_id: (bus == null ? void 0 : bus.bus_id) || \"DEMO\",\n      valid_from: new Date().toISOString(),\n      signature: \"MOCK_SIG_ECDSA_BASE64\"\n    };\n    setTicket(newTicket);\n    saveTicketOffline(newTicket);\n  }, []);\n  var handleWakeUpTest = function handleWakeUpTest() {\n    scheduleWakeUpAlert(\"Ambala Cantt\", \"Amit\");\n  };\n  if (!ticket) return _jsx(Text, {\n    children: \"Loading...\"\n  });\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"Your Ticket\"\n    }), _jsx(View, {\n      style: styles.qrContainer,\n      children: _jsx(QRCode, {\n        value: JSON.stringify(ticket),\n        size: 200\n      })\n    }), _jsxs(Text, {\n      children: [\"ID: \", ticket.ticket_id]\n    }), _jsxs(Text, {\n      children: [\"Bus: \", ticket.bus_id]\n    }), _jsxs(Text, {\n      style: {\n        color: 'green',\n        fontWeight: 'bold'\n      },\n      children: [\"PAID - \", ticket.signature.substring(0, 10), \"...\"]\n    }), _jsx(View, {\n      style: {\n        marginTop: 30\n      },\n      children: _jsx(Button, {\n        title: \"Test Wake Up Alert\",\n        onPress: handleWakeUpTest\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    padding: 20,\n    justifyContent: 'center'\n  },\n  title: {\n    fontSize: 22,\n    fontWeight: 'bold',\n    marginBottom: 20\n  },\n  qrContainer: {\n    marginBottom: 20,\n    padding: 10,\n    backgroundColor: 'white'\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","View","Text","StyleSheet","Button","QRCode","saveTicketOffline","scheduleWakeUpAlert","jsx","_jsx","jsxs","_jsxs","TicketScreen","_ref","route","_ref2","params","bus","_useState","_useState2","_slicedToArray","ticket","setTicket","newTicket","ticket_id","Date","now","bus_id","valid_from","toISOString","signature","handleWakeUpTest","children","style","styles","container","title","qrContainer","value","JSON","stringify","size","color","fontWeight","substring","marginTop","onPress","create","flex","alignItems","padding","justifyContent","fontSize","marginBottom","backgroundColor"],"sources":["C:/Users/avibh/OneDrive/Desktop/HR RoadWays/frontend/screens/TicketScreen.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { View, Text, StyleSheet, Button } from 'react-native';\r\nimport QRCode from 'react-native-qrcode-svg';\r\nimport { saveTicketOffline } from '../utils/storage';\r\nimport { scheduleWakeUpAlert } from '../utils/notifications';\r\n\r\nexport default function TicketScreen({ route }) {\r\n  const { bus } = route.params || {};\r\n  const [ticket, setTicket] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Simulator booking\r\n    const newTicket = {\r\n      ticket_id: \"HRB-\" + Date.now(),\r\n      bus_id: bus?.bus_id || \"DEMO\",\r\n      valid_from: new Date().toISOString(),\r\n      signature: \"MOCK_SIG_ECDSA_BASE64\"\r\n    };\r\n    setTicket(newTicket);\r\n    saveTicketOffline(newTicket);\r\n  }, []);\r\n\r\n  const handleWakeUpTest = () => {\r\n    scheduleWakeUpAlert(\"Ambala Cantt\", \"Amit\");\r\n  };\r\n\r\n  if (!ticket) return <Text>Loading...</Text>;\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>Your Ticket</Text>\r\n      <View style={styles.qrContainer}>\r\n        <QRCode value={JSON.stringify(ticket)} size={200} />\r\n      </View>\r\n      <Text>ID: {ticket.ticket_id}</Text>\r\n      <Text>Bus: {ticket.bus_id}</Text>\r\n      <Text style={{color:'green', fontWeight:'bold'}}>PAID - {ticket.signature.substring(0,10)}...</Text>\r\n      \r\n      <View style={{marginTop: 30}}>\r\n        <Button title=\"Test Wake Up Alert\" onPress={handleWakeUpTest} />\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { flex: 1, alignItems: 'center', padding: 20, justifyContent: 'center' },\r\n  title: { fontSize: 22, fontWeight: 'bold', marginBottom: 20 },\r\n  qrContainer: { marginBottom: 20, padding: 10, backgroundColor: 'white' }\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}