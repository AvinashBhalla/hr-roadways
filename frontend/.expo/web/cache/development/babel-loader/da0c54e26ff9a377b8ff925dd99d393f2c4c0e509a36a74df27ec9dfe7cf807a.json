{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport { Text, List, Button, FAB, Dialog, Portal, TextInput, DataTable } from 'react-native-paper';\nimport { supabase } from \"../utils/supabase\";\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function SuperAdminDashboard() {\n  var _useState = useState('users'),\n    _useState2 = _slicedToArray(_useState, 2),\n    activeTab = _useState2[0],\n    setActiveTab = _useState2[1];\n  var _useState3 = useState([]),\n    _useState4 = _slicedToArray(_useState3, 2),\n    items = _useState4[0],\n    setItems = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    loading = _useState6[0],\n    setLoading = _useState6[1];\n  var _useState7 = useState(false),\n    _useState8 = _slicedToArray(_useState7, 2),\n    visible = _useState8[0],\n    setVisible = _useState8[1];\n  var _useState9 = useState({}),\n    _useState0 = _slicedToArray(_useState9, 2),\n    dialogData = _useState0[0],\n    setDialogData = _useState0[1];\n  useEffect(function () {\n    fetchData();\n  }, [activeTab]);\n  var fetchData = function () {\n    var _ref = _asyncToGenerator(function* () {\n      setLoading(true);\n      var query;\n      if (activeTab === 'users') query = supabase.from('profiles').select('*');\n      if (activeTab === 'buses') query = supabase.from('buses').select('*');\n      if (activeTab === 'driver_details') query = supabase.from('driver_details').select('*');\n      if (activeTab === 'bus_stops') query = supabase.from('bus_stops').select('*');\n      var _yield$query = yield query,\n        data = _yield$query.data,\n        error = _yield$query.error;\n      if (error) console.error(error);else setItems(data || []);\n      setLoading(false);\n    });\n    return function fetchData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var showDialog = function showDialog() {\n    var item = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    setDialogData(item);\n    setVisible(true);\n  };\n  var hideDialog = function hideDialog() {\n    return setVisible(false);\n  };\n  var handleSave = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      hideDialog();\n      fetchData();\n    });\n    return function handleSave() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var renderContent = function renderContent() {\n    if (activeTab === 'users') {\n      return _jsxs(DataTable, {\n        children: [_jsxs(DataTable.Header, {\n          children: [_jsx(DataTable.Title, {\n            children: \"Email\"\n          }), _jsx(DataTable.Title, {\n            children: \"Role\"\n          })]\n        }), items.map(function (item) {\n          return _jsxs(DataTable.Row, {\n            children: [_jsx(DataTable.Cell, {\n              children: item.email\n            }), _jsx(DataTable.Cell, {\n              children: item.role\n            })]\n          }, item.id);\n        })]\n      });\n    }\n    return _jsxs(Text, {\n      children: [\"Data for \", activeTab]\n    });\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.tabs,\n      children: [_jsx(Button, {\n        mode: activeTab === 'users' ? 'contained' : 'text',\n        onPress: function onPress() {\n          return setActiveTab('users');\n        },\n        children: \"Users\"\n      }), _jsx(Button, {\n        mode: activeTab === 'buses' ? 'contained' : 'text',\n        onPress: function onPress() {\n          return setActiveTab('buses');\n        },\n        children: \"Buses\"\n      }), _jsx(Button, {\n        mode: activeTab === 'drivers' ? 'contained' : 'text',\n        onPress: function onPress() {\n          return setActiveTab('driver_details');\n        },\n        children: \"Drivers\"\n      }), _jsx(Button, {\n        mode: activeTab === 'stops' ? 'contained' : 'text',\n        onPress: function onPress() {\n          return setActiveTab('bus_stops');\n        },\n        children: \"Stops\"\n      })]\n    }), _jsx(ScrollView, {\n      contentContainerStyle: styles.content,\n      children: renderContent()\n    }), _jsx(FAB, {\n      icon: \"plus\",\n      style: styles.fab,\n      onPress: function onPress() {\n        return showDialog();\n      }\n    }), _jsx(Portal, {\n      children: _jsxs(Dialog, {\n        visible: visible,\n        onDismiss: hideDialog,\n        children: [_jsxs(Dialog.Title, {\n          children: [\"Add/Edit \", activeTab]\n        }), _jsxs(Dialog.Content, {\n          children: [_jsx(TextInput, {\n            label: \"Field 1\"\n          }), _jsx(TextInput, {\n            label: \"Field 2\"\n          })]\n        }), _jsxs(Dialog.Actions, {\n          children: [_jsx(Button, {\n            onPress: hideDialog,\n            children: \"Cancel\"\n          }), _jsx(Button, {\n            onPress: handleSave,\n            children: \"Save\"\n          })]\n        })]\n      })\n    })]\n  });\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#f5f5f5'\n  },\n  tabs: {\n    flexDirection: 'row',\n    padding: 10,\n    backgroundColor: '#fff'\n  },\n  content: {\n    padding: 10\n  },\n  fab: {\n    position: 'absolute',\n    margin: 16,\n    right: 0,\n    bottom: 0\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","View","StyleSheet","ScrollView","Text","List","Button","FAB","Dialog","Portal","TextInput","DataTable","supabase","jsx","_jsx","jsxs","_jsxs","SuperAdminDashboard","_useState","_useState2","_slicedToArray","activeTab","setActiveTab","_useState3","_useState4","items","setItems","_useState5","_useState6","loading","setLoading","_useState7","_useState8","visible","setVisible","_useState9","_useState0","dialogData","setDialogData","fetchData","_ref","_asyncToGenerator","query","from","select","_yield$query","data","error","console","apply","arguments","showDialog","item","length","undefined","hideDialog","handleSave","_ref2","renderContent","children","Header","Title","map","Row","Cell","email","role","id","style","styles","container","tabs","mode","onPress","contentContainerStyle","content","icon","fab","onDismiss","Content","label","Actions","create","flex","backgroundColor","flexDirection","padding","position","margin","right","bottom"],"sources":["C:/Users/avibh/OneDrive/Desktop/HR RoadWays/frontend/screens/SuperAdminDashboard.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { View, StyleSheet, ScrollView } from 'react-native';\r\nimport { Text, List, Button, FAB, Dialog, Portal, TextInput, DataTable } from 'react-native-paper';\r\nimport { supabase } from '../utils/supabase';\r\n\r\nexport default function SuperAdminDashboard() {\r\n  const [activeTab, setActiveTab] = useState('users'); // users, buses, drivers, stops\r\n  const [items, setItems] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  \r\n  // Dialog State\r\n  const [visible, setVisible] = useState(false);\r\n  const [dialogData, setDialogData] = useState({});\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, [activeTab]);\r\n\r\n  const fetchData = async () => {\r\n    setLoading(true);\r\n    let query;\r\n    if (activeTab === 'users') query = supabase.from('profiles').select('*');\r\n    if (activeTab === 'buses') query = supabase.from('buses').select('*');\r\n    if (activeTab === 'driver_details') query = supabase.from('driver_details').select('*'); // Improve with join later\r\n    if (activeTab === 'bus_stops') query = supabase.from('bus_stops').select('*');\r\n\r\n    const { data, error } = await query;\r\n    if (error) console.error(error);\r\n    else setItems(data || []);\r\n    setLoading(false);\r\n  };\r\n\r\n  const showDialog = (item = {}) => {\r\n    setDialogData(item);\r\n    setVisible(true);\r\n  };\r\n  const hideDialog = () => setVisible(false);\r\n\r\n  const handleSave = async () => {\r\n    // Basic implementation for adding/updating logic depending on activeTab\r\n    // For now, just a placeholder structure\r\n    hideDialog();\r\n    fetchData();\r\n  };\r\n\r\n  const renderContent = () => {\r\n    if (activeTab === 'users') {\r\n      return (\r\n        <DataTable>\r\n          <DataTable.Header>\r\n            <DataTable.Title>Email</DataTable.Title>\r\n            <DataTable.Title>Role</DataTable.Title>\r\n          </DataTable.Header>\r\n          {items.map((item) => (\r\n            <DataTable.Row key={item.id}>\r\n              <DataTable.Cell>{item.email}</DataTable.Cell>\r\n              <DataTable.Cell>{item.role}</DataTable.Cell>\r\n            </DataTable.Row>\r\n          ))}\r\n        </DataTable>\r\n      );\r\n    }\r\n    // Implement other tabs similarly...\r\n    return <Text>Data for {activeTab}</Text>;\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.tabs}>\r\n        <Button mode={activeTab === 'users' ? 'contained' : 'text'} onPress={() => setActiveTab('users')}>Users</Button>\r\n        <Button mode={activeTab === 'buses' ? 'contained' : 'text'} onPress={() => setActiveTab('buses')}>Buses</Button>\r\n        <Button mode={activeTab === 'drivers' ? 'contained' : 'text'} onPress={() => setActiveTab('driver_details')}>Drivers</Button>\r\n        <Button mode={activeTab === 'stops' ? 'contained' : 'text'} onPress={() => setActiveTab('bus_stops')}>Stops</Button>\r\n      </View>\r\n\r\n      <ScrollView contentContainerStyle={styles.content}>\r\n        {renderContent()}\r\n      </ScrollView>\r\n\r\n      <FAB\r\n        icon=\"plus\"\r\n        style={styles.fab}\r\n        onPress={() => showDialog()}\r\n      />\r\n\r\n      <Portal>\r\n        <Dialog visible={visible} onDismiss={hideDialog}>\r\n          <Dialog.Title>Add/Edit {activeTab}</Dialog.Title>\r\n          <Dialog.Content>\r\n            <TextInput label=\"Field 1\" />\r\n            <TextInput label=\"Field 2\" />\r\n          </Dialog.Content>\r\n          <Dialog.Actions>\r\n            <Button onPress={hideDialog}>Cancel</Button>\r\n            <Button onPress={handleSave}>Save</Button>\r\n          </Dialog.Actions>\r\n        </Dialog>\r\n      </Portal>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: { flex: 1, backgroundColor: '#f5f5f5' },\r\n  tabs: { flexDirection: 'row', padding: 10, backgroundColor: '#fff' },\r\n  content: { padding: 10 },\r\n  fab: { position: 'absolute', margin: 16, right: 0, bottom: 0 },\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}